// auto generated by kmigrator
// KMIGRATOR:0034_auto_20210804_1622:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi41IG9uIDIwMjEtMDgtMDQgMTY6MjIKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtaWdyYXRpb25zLCBtb2RlbHMKaW1wb3J0IGRqYW5nby5kYi5tb2RlbHMuZGVsZXRpb24KCgpjbGFzcyBNaWdyYXRpb24obWlncmF0aW9ucy5NaWdyYXRpb24pOgoKICAgIGRlcGVuZGVuY2llcyA9IFsKICAgICAgICAoJ19kamFuZ29fc2NoZW1hJywgJzAwMzNfYXV0b18yMDIxMDgwM18xNjU0JyksCiAgICBdCgogICAgb3BlcmF0aW9ucyA9IFsKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J2NhdGVnb3J5Q2xhc3NpZmllcicsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Gb3JlaWduS2V5KGJsYW5rPVRydWUsIGRiX2NvbHVtbj0nY2F0ZWdvcnlDbGFzc2lmaWVyJywgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5QUk9URUNULCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudGlja2V0Y2F0ZWdvcnljbGFzc2lmaWVyJyksCiAgICAgICAgKSwKICAgICAgICBtaWdyYXRpb25zLkFsdGVyRmllbGQoCiAgICAgICAgICAgIG1vZGVsX25hbWU9J3RpY2tldCcsCiAgICAgICAgICAgIG5hbWU9J2Rlc2NyaXB0aW9uQ2xhc3NpZmllcicsCiAgICAgICAgICAgIGZpZWxkPW1vZGVscy5Gb3JlaWduS2V5KGJsYW5rPVRydWUsIGRiX2NvbHVtbj0nZGVzY3JpcHRpb25DbGFzc2lmaWVyJywgbnVsbD1UcnVlLCBvbl9kZWxldGU9ZGphbmdvLmRiLm1vZGVscy5kZWxldGlvbi5QUk9URUNULCByZWxhdGVkX25hbWU9JysnLCB0bz0nX2RqYW5nb19zY2hlbWEudGlja2V0ZGVzY3JpcHRpb25jbGFzc2lmaWVyJyksCiAgICAgICAgKSwKICAgIF0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field categoryClassifier on ticket
--
SET CONSTRAINTS "Ticket_categoryClassifier_e01aafa7_fk_TicketPlaceClassifier_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_categoryClassifier_e01aafa7_fk_TicketPlaceClassifier_id";
ALTER TABLE "Ticket" ADD CONSTRAINT "Ticket_categoryClassifier_e01aafa7_fk_TicketCat" FOREIGN KEY ("categoryClassifier") REFERENCES "TicketCategoryClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field descriptionClassifier on ticket
--
SET CONSTRAINTS "Ticket_descriptionClassifie_74a3e2c4_fk_TicketPla" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_descriptionClassifie_74a3e2c4_fk_TicketPla";
ALTER TABLE "Ticket" ADD CONSTRAINT "Ticket_descriptionClassifie_74a3e2c4_fk_TicketDes" FOREIGN KEY ("descriptionClassifier") REFERENCES "TicketDescriptionClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Alter field descriptionClassifier on ticket
--
SET CONSTRAINTS "Ticket_descriptionClassifie_74a3e2c4_fk_TicketPla" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_descriptionClassifie_74a3e2c4_fk_TicketPla";
ALTER TABLE "Ticket" ADD CONSTRAINT "Ticket_descriptionClassifie_74a3e2c4_fk_TicketPla" FOREIGN KEY ("descriptionClassifier") REFERENCES "TicketPlaceClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
--
-- Alter field categoryClassifier on ticket
--
SET CONSTRAINTS "Ticket_categoryClassifier_e01aafa7_fk_TicketPlaceClassifier_id" IMMEDIATE; ALTER TABLE "Ticket" DROP CONSTRAINT "Ticket_categoryClassifier_e01aafa7_fk_TicketPlaceClassifier_id";
ALTER TABLE "Ticket" ADD CONSTRAINT "Ticket_categoryClassifier_e01aafa7_fk_TicketPlaceClassifier_id" FOREIGN KEY ("categoryClassifier") REFERENCES "TicketPlaceClassifier" ("id") DEFERRABLE INITIALLY DEFERRED;
COMMIT;

    `)
}
